## 背景

当前master存在的问题：

1. 较远处车辆刹车较弱(Cross和Merge场景)
2. 绕行车辆时减速限速不足
3. 被cut in时减速有点大

<img src="/Users/zhouchengyang/Desktop/word.png" alt="word" style="zoom:45%;" />

<img src="/Users/zhouchengyang/Desktop/master_cross_v.png" alt="master_cross_v" style="zoom:45%;" />

被cut in

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821142221381.png" alt="image-20200821142221381" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821142305589.png" alt="image-20200821142305589" style="zoom:50%;" />



## 方法1

尝试使用纵向DP优化结果作为参考，在同样不加权重时跟master reference对比：

1. DP线作为参考

2. 跟车距离作为参考

<img src="/Users/zhouchengyang/Desktop/qp_1.png" alt="qp_1" style="zoom:45%;" />

<img src="/Users/zhouchengyang/Desktop/qp_2.png" alt="qp_2" style="zoom:45%;" />

<img src="/Users/zhouchengyang/Desktop/qp_v_2.png" alt="qp_v_2" style="zoom:45%;" />

结论：改变不太大，dp效果并不明显比qp得到结果好

## 方法2

横穿减速不足主要原因是因为跟较远前车cost所影响，可以将跟车cost缩减到一定值(左边不变，右边是atan函数)

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821151926857.png" alt="image-20200821151926857" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821151639847.png" alt="image-20200821151639847" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821151705853.png" alt="image-20200821151705853" style="zoom:50%;" />

被cut in与master表现一致

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821142723387.png" alt="image-20200821142723387" style="zoom:50%;" />

## 方法3

被高速车辆cut in减速过快，被横穿时减速较慢体现在s到sref的收敛速度上，如果设置前车速度高收敛速度慢，前车速度低收敛速度快即可解决这类问题。

cost/(0.2 * v_leader + 0.05)

被cut in

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821151254677.png" alt="image-20200821151254677" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821151303747.png" alt="image-20200821151303747" style="zoom:50%;" />



横穿

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821150816741.png" alt="image-20200821150816741" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821150851585.png" alt="image-20200821150851585" style="zoom:50%;" />

## 方法三和方法二

风险1：远距离不起步

风险2：他车Merge速度比较高的时候会减速慢？

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821165204015.png" alt="image-20200821165204015" style="zoom:50%;" />

<img src="/Users/zhouchengyang/Library/Application Support/typora-user-images/image-20200821165223335.png" alt="image-20200821165223335" style="zoom:50%;" />

横穿





